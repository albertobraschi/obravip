<?php/** * Indexa - Gwap Payment Module * * @title      Magento -> Custom Payment Module for Gwap * @category   Payment Gateway * @package    Indexa_Gwap * @author     Indexa Development Team -> desenvolvimento [at] indexainternet [dot] com  [dot] br * @copyright  Copyright (c) 2011 Indexa - http://www.indexainternet.com.br * @license    http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0) */class Indexa_Gwap_Block_Form_Cc extends Mage_Payment_Block_Form_Cc {    protected function _construct() {        parent::_construct();        $this->setTemplate('indexa_gwap/form/cc.phtml');    }        /**     * Retrieve availables credit card types     *     * @return array     */    public function getCcAvailableTypes()    {        $_types = Mage::getModel('gwap/source_methods')->toOptionArray();                $types = array();        foreach ($_types as $data) {            if (isset($data['label']) && isset($data['value'])) {                $types[$data['value']] = $data['label'];            }        }                if ($method = $this->getMethod()) {            $availableTypes = $method->getConfigData('cctypes');                        if ($availableTypes) {                $availableTypes = explode(',', $availableTypes);                foreach ($types as $code=>$name) {                    if (!in_array($code, $availableTypes)) {                        unset($types[$code]);                    }                }            }        }        return $types;    }}